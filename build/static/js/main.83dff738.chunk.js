(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{205:function(e,t,n){},356:function(e,t,n){},362:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),o=n.n(r),c=n(21),i=n.n(c),s=n(11),l=n.n(s),u=n(23),d=n(9),p=n(67),j=n(37),b=(n(205),n(371)),g=n(30),h=n(36),m=n.n(h),x="GET_POSTS_SUCCESS",O="ADD_POST_SUCCESS",f="EDIT_POST_SUCCESS",y="DELETE_POST_SUCESS",v="POST_LOADING",S="POST_FAIL",k="CLEAN_STATE",C=n(57);C.config();var w=function(){return function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:v}),e.next=4,m()({url:"".concat("shared-journal-backend.herokuapp.com","/api/posts/"),method:"GET",headers:{"x-auth-token":localStorage.getItem("auth-token")}});case 4:n=e.sent,t({type:x,payload:n.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t({type:S});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},I="SETTINGS_FAIL",T="SETTINGS_LOADING",D="GET_EDIT_OR_POST_SETTINGS_SUCCESS",R="REGISTER_USER",A="LOGIN_USER",N="CHECK_USER_SIGNED_IN",E="LOGOUT",_="GET_USER",P="EDIT_DISPLAY_NAME";C.config();var U=function(){return function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:T}),e.next=4,m()({url:"".concat("shared-journal-backend.herokuapp.com","/api/settings/"),method:"GET",headers:{"x-auth-token":localStorage.getItem("auth-token")}});case 4:n=e.sent,t({type:D,payload:n.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t({type:I,msg:e.t0.response.data.msg});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()};C.config();var L=function(e){return function(){var t=Object(u.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m()({url:"".concat("shared-journal-backend.herokuapp.com","/api/users/login"),method:"POST",data:e});case 2:return a=t.sent,n({type:A,payload:a.data}),t.abrupt("return",{token:a.data.token,user:a.data.user});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};n(57).config();var F=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(t=localStorage.getItem("auth-token"))&&(localStorage.setItem("auth-token",""),t=""),e.next=4,m()({url:"".concat("shared-journal-backend.herokuapp.com","/api/users/isTokenValid"),method:"POST",headers:{"x-auth-token":t}});case 4:return n=e.sent,e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=Object(r.createContext)({}),J=Object(r.createContext)(void 0),W=n(8),z=n(197),B=function(e){var t=e.component,n=Object(z.a)(e,["component"]),o=Object(r.useState)(),c=Object(d.a)(o,2),i=c[0],s=c[1];return Object(r.useEffect)((function(){var e=!1;return function(){var t=Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=6;break}return t.t0=s,t.next=4,F();case 4:t.t1=t.sent,(0,t.t0)(t.t1);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()(),function(){return e=!0}})),void 0!==i?Object(a.jsx)(j.b,Object(W.a)(Object(W.a)({},n),{},{render:function(e){return i?Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(t,Object(W.a)({},e))}):Object(a.jsx)(j.a,{to:"/home"})}})):Object(a.jsx)(j.a,{to:"/"})},Z=Object(g.b)(null,{logOut:function(){return function(e){console.log("CLEAN UP"),e({type:E}),e({type:k})}}})((function(e){var t=e.logOut,n=Object(j.g)(),o=Object(r.useContext)(M),c=o.userData,i=o.setUserData,s=Object(r.useContext)(J),l=Object(d.a)(s,1)[0];return c.user&&!l?Object(a.jsxs)("div",{style:H.buttonDiv,children:[Object(a.jsx)("button",{style:H.button,onClick:function(){n.push("/user_settings")},children:"User Settings"}),Object(a.jsx)("button",{style:H.button,onClick:function(){t(),i({token:"",user:""}),localStorage.setItem("auth-token",""),n.push("/home")},children:"Log out"})]}):Object(a.jsx)(a.Fragment,{})})),H={buttonDiv:{display:"flex"},button:{height:"50px",backgroundColor:"rgb(47, 88, 183)",color:"rgb(245, 245, 245)",alignItems:"center",border:"none",cursor:"pointer",outline:"none",fontSize:15,padding:"0 10px 0 10px"}},G=n.p+"static/media/favicon.0023e3b7.ico",Y=n(367),V=Y.a.Title,X=function(){var e=Object(r.useContext)(J),t=Object(d.a)(e,1)[0],n=Object(r.useState)(!1),o=Object(d.a)(n,2),c=o[0],i=o[1],s=Object(r.useState)(window.innerWidth<435),j=Object(d.a)(s,1)[0];return Object(r.useEffect)((function(){var e=!1;return function(){var t=Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=6;break}return t.t0=i,t.next=4,F();case 4:t.t1=t.sent,(0,t.t0)(t.t1);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()(),function(){return e=!0}})),t?Object(a.jsx)("div",{style:K.navBar,children:Object(a.jsxs)("div",{style:K.brandInfo,children:[Object(a.jsx)("img",{src:G,style:K.brandLogo,alt:"shared-journal logo"}),j?Object(a.jsx)(V,{style:K.brandText,children:"SJ"}):Object(a.jsx)(V,{style:K.brandText,children:"Shared Journal"})]})}):Object(a.jsxs)("div",{style:K.navBar,children:[Object(a.jsx)(p.b,{to:c?"/":"/home",style:K.link,children:Object(a.jsxs)("div",{style:K.brandInfo,children:[Object(a.jsx)("img",{src:G,style:K.brandLogo,alt:"shared-journal logo"}),j?Object(a.jsx)(V,{style:K.brandText,children:"SJ"}):Object(a.jsx)(V,{style:K.brandText,children:"Shared Journal"})]})}),c&&Object(a.jsx)(Z,{})]})},K={navBar:{backgroundColor:"rgb(205, 220, 250)",height:"50px",alignItems:"center",justifyContent:"space-between",display:"flex",marginBottom:"20px"},brandText:{color:"rgb(47, 88, 183)",fontSize:30,margin:0,padding:"0 0 0 10px"},brandLogo:{width:30,height:30},brandInfo:{display:"flex",alignItems:"center",paddingLeft:10},link:{textDecoration:"none"}},q=n(121),Q=n.n(q),$=n(370),ee=n(364),te=n(365),ne=n(65),ae=n(80),re=n(376),oe=n(177),ce=n(178),ie=n(84),se=n(198),le=n(192),ue=n(375),de=function(e){Object(se.a)(n,e);var t=Object(le.a)(n);function n(e){var r;return Object(oe.a)(this,n),(r=t.call(this,e)).renderImage=function(){return r.state.images.map((function(e,t){return r.props.post?Object(a.jsx)("img",{style:t===r.state.counter?pe.imageScrollActive:pe.imageScroll,src:e,alt:e},t):Object(a.jsx)("img",{style:t===r.state.counter?pe.imageScrollActive:pe.imageScroll,src:URL.createObjectURL(e),alt:e},t)}))},r.incrementCounter=function(e){e.preventDefault(),r.state.counter===r.state.images.length-1?r.setState({counter:0}):r.setState({counter:r.state.counter+1})},r.decrementCounter=function(e){e.preventDefault(),0===r.state.counter?r.setState({counter:r.state.images.length-1}):r.setState({counter:r.state.counter-1})},r.handleDelete=function(e,t){if(r.props.post){var n=r.state.images.filter((function(t,n,a){return t!==r.state.images[e]})),a=r.state.keys.filter((function(t,n,a){return t!==r.state.keys[e]}));r.setState({counter:0}),r.props.deleteImage(r.state.images[e],r.state.keys[e],e),r.setState({images:n,keys:a})}else{var o=r.state.images.filter((function(t,n,a){return t!==r.state.images[e]}));r.setState({counter:0}),r.props.deleteImage(r.state.images[e],void 0),r.setState({images:o})}},r.state={images:r.props.images,newImages:r.props.newImages,keys:r.props.post&&r.props.post.image_keys,counter:0},r.incrementCounter=r.incrementCounter.bind(Object(ie.a)(r)),r.decrementCounter=r.decrementCounter.bind(Object(ie.a)(r)),r.renderImage=r.renderImage.bind(Object(ie.a)(r)),r.handleDelete=r.handleDelete.bind(Object(ie.a)(r)),r}return Object(ce.a)(n,[{key:"render",value:function(){var e=this;return this.state.images.length>0&&Object(a.jsx)("div",{children:Object(a.jsxs)("div",{style:pe.imageScrollControlsContainer,children:[Object(a.jsxs)("div",{style:pe.imageScrollContainer,children:[this.state.images.length>1&&Object(a.jsx)("button",{onClick:this.decrementCounter,style:pe.imageScrollControls,children:"<"}),this.renderImage(),this.state.images.length>1&&Object(a.jsx)("button",{onClick:this.incrementCounter,style:pe.imageScrollControls,children:">"})]}),Object(a.jsx)(ue.a,{onClick:function(){return e.handleDelete(e.state.counter)}})]})})}}]),n}(o.a.Component),pe={image:{borderRadius:4,margin:"3px 15px 15px 15px",maxWidth:200,maxHeight:185,width:"auto",height:"auto"},imageScrollActive:{position:"relative",borderRadius:4,margin:"3px 15px 15px 15px",maxWidth:200,maxHeight:185,width:"auto",height:"auto"},imageScroll:{display:"none"},imageScrollContainer:{display:"flex",alignItems:"center",justifyContent:"space-between"},imageScrollControls:{border:"none",backgroundColor:"rgb(255, 255, 255)",outline:"none",cursor:"pointer",padding:0,margin:0},imageScrollControlsContainer:{margin:"0 auto"}},je=de,be=n.p+"static/media/placeholderImage.264a9e63.png",ge=$.a.TextArea,he=Y.a.Text,me=Object(g.b)(null,{newPost:function(e){return function(){var t=Object(u.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:v}),t.next=4,m()({url:"".concat("shared-journal-backend.herokuapp.com","/api/posts/new"),method:"POST",headers:{"x-auth-token":localStorage.getItem("auth-token")},data:e});case 4:a=t.sent,n({type:O,payload:a.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n({type:S});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.newPost,n="".concat(new Date(Date.now()).getFullYear(),"-").concat(1===(new Date(Date.now()).getMonth()+1+"").length?(new Date(Date.now()).getMonth()+1+"").padStart(2,0):new Date(Date.now()).getMonth()+1,"-").concat(1===(new Date(Date.now()).getDate()+1+"").length?(new Date(Date.now()).getDate()+1+"").padStart(2,0):new Date(Date.now()).getDate()+1),c=Object(r.useState)(""),i=Object(d.a)(c,2),s=i[0],l=i[1],u=Object(r.useState)([]),p=Object(d.a)(u,2),j=p[0],b=p[1],g=Object(r.useState)(!1),h=Object(d.a)(g,2),m=h[0],x=h[1],O=Object(r.useState)(""),f=Object(d.a)(O,2),y=f[0],v=f[1],S=o.a.useRef(null);return Object(a.jsx)("div",{children:Object(a.jsx)(ee.a,{spinning:m,children:Object(a.jsxs)(te.a,{title:"Compose a Post",style:xe.cardForm,headStyle:{fontSize:25},children:[Object(a.jsxs)("div",{style:xe.postImageAndTextForm,children:[0!==j.length?Object(a.jsx)("div",{style:xe.uploadDiv,children:Object(a.jsx)("div",{style:xe.imageFill,children:Object(a.jsx)(je,{images:j,deleteImage:function(e,t,n){for(var a=[],r=0;r<j.length;r++)e!==j[r]&&a.push(j[r]);b(a)}})})}):Object(a.jsxs)("div",{style:xe.uploadDiv,children:[Object(a.jsx)("div",{style:xe.imageFill,children:Object(a.jsx)("img",{src:be,style:xe.placeholderImage,alt:"placeholder"})}),Object(a.jsx)("input",{type:"file",accept:"image/*",ref:S,style:{display:"none"},multiple:!0,onChange:function(e){for(var t=[],n=0;n<e.target.files.length;n++)t.push(e.target.files[n]);b(j.concat(t))}}),Object(a.jsx)(ne.a,{style:xe.imageUploadButton,icon:Object(a.jsx)(re.a,{}),onClick:function(){return S.current.click()},children:"Click to Upload"})]}),Object(a.jsx)(ge,{style:xe.postTextArea,value:s,onChange:function(e){return l(e.target.value)},placeholder:"Start a new Post"})]}),Object(a.jsxs)("div",{style:xe.postDateAndUploadForm,children:[Object(a.jsxs)("div",{style:xe.dateDiv,children:[Object(a.jsx)(he,{style:{color:"rgb(245, 245, 245)",marginRight:10},children:"Date"}),Object(a.jsx)("input",{style:xe.dateInput,type:"date",value:y||n,onChange:function(e){return v(e.target.value)}})]}),Object(a.jsx)(ae.a,{title:0===s.length?"Your post must have text":"",children:Object(a.jsx)(ne.a,{style:xe.submitButton,disabled:0===s.length,onClick:function(){var e=new Q.a,n=new Date(y||Date.now());e.append("text",s),e.append("date",n),e.append("month",n.getMonth()),e.append("year",n.getFullYear()),j.map((function(t){return e.append("image",t)})),x(!0),t(e).then((function(){x(!1),l(""),b([]),v("")}))},children:"Submit"})})]})]})})})})),xe={cardForm:{margin:35,textAlign:"center"},imageFill:{padding:10,width:280,height:240,display:"flex",justifyContent:"center",alignItems:"center",border:"1.5px solid black",borderRadius:8},uploadDiv:{display:"block"},postTextArea:{marginLeft:25,height:240,padding:10,resize:"none",fontSize:15,outline:"none"},postImageAndTextForm:{display:"flex",margin:25},postDateAndUploadForm:{display:"flex",justifyContent:"space-between",alignItems:"center",marginRight:50,marginLeft:50},dateDiv:{padding:"5px 10px 5px 10px",borderRadius:8,display:"flex",maxWidth:350,margin:5,justifyContent:"space-between",alignItems:"center",backgroundColor:"rgb(47, 88, 183)"},dateInput:{borderRadius:2,border:"none"},submitButton:{height:34,border:"none",borderRadius:8,color:"rgb( 245, 245, 245)",backgroundColor:"rgb(47, 88, 183)"},imageUploadButton:{borderRadius:8,marginTop:5},placeholderImage:{maxWidth:200,maxHeight:250,width:"auto",height:"auto"}},Oe=n(373),fe=n(377),ye=Y.a.Text,ve=Y.a.Paragraph,Se=Object(g.b)(null,{deletePost:function(e){return function(){var t=Object(u.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:v}),t.next=4,m()({url:"".concat("shared-journal-backend.herokuapp.com","/api/posts/delete_post?id=").concat(e),method:"DELETE",headers:{"x-auth-token":localStorage.getItem("auth-token")}});case 4:a=t.sent,n({type:y,payload:a.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n({type:S});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.post,n=e.deletePost,o=e.changeEditState,c=["January","February","March","April","May","June","July","August","September","October","November","December"],i=Object(r.useState)(0),s=Object(d.a)(i,2),l=s[0],u=s[1],p=Object(r.useState)(t.images),j=Object(d.a)(p,1)[0],b=Object(r.useState)(!1),g=Object(d.a)(b,2),h=g[0],m=g[1],x=window.innerWidth<435;return Object(a.jsxs)(te.a,{style:x?{}:ke.postStyle,actions:[Object(a.jsx)(fe.a,{onClick:function(){return o()}},"edit"),Object(a.jsx)(Oe.a,{title:"Are you sure to delete this post?",onConfirm:function(){return n(t._id)},okText:"Yes",cancelText:"No",children:Object(a.jsx)(ue.a,{},"delete")})],children:[j&&Object(a.jsxs)("div",{style:ke.imageScrollContainer,children:[t.images.length>1&&Object(a.jsx)("button",{style:ke.imageScrollControlsLeft,onClick:function(){u(0===l?j.length-1:l-1)},children:"<"}),j.map((function(e,t){return Object(a.jsx)("img",{style:h?t===l?ke.imageScrollZoomActive:ke.imageScrollZoom:t===l?ke.imageScrollNonZoomActive:ke.imageScrollNonZoom,src:e,alt:e,onClick:function(){return m(!h)}},t)})),t.images.length>1&&Object(a.jsx)("button",{style:ke.imageScrollControlsRight,onClick:function(){l===j.length-1?u(0):u(l+1)},children:">"})]}),Object(a.jsx)(ve,{style:ke.postText,children:Object(a.jsx)(ye,{children:t.text})}),Object(a.jsx)("p",{style:ke.postDate,children:function(){var e=new Date(t.date);return e.getTimezoneOffset()>0&&e.setTime(e.getTime()+60*e.getTimezoneOffset()*1e3),"".concat(e.getDate()," ~ ").concat(c[e.getMonth()]," ~ ").concat(e.getFullYear())}()})]})})),ke={postStyle:{marginRight:50,marginLeft:50},postText:{whiteSpace:"pre-wrap",paddingRight:15},postDate:{fontSize:12},imageNonZoom:{float:"left",borderRadius:4,margin:"3px 15px 15px 15px",maxWidth:"25%",maxHeight:300,width:"auto",height:"auto",cursor:"zoom-in"},imageZoom:{float:"left",borderRadius:4,margin:"3px 15px 15px 15px",maxWidth:"45%",maxHeight:600,width:"auto",height:"auto",cursor:"zoom-out"},imageScrollZoomActive:{position:"relative",float:"left",borderRadius:4,margin:"3px 15px 15px 15px",maxWidth:600,maxHeight:600,width:"auto",height:"auto",cursor:"zoom-out"},imageScrollNonZoomActive:{position:"relative",float:"left",borderRadius:4,margin:"3px 15px 15px 15px",maxWidth:300,maxHeight:300,width:"auto",height:"auto",cursor:"zoom-in"},imageScrollZoom:{opacity:0,position:"fixed",float:"left",width:0,height:0},imageScrollNonZoom:{opacity:0,position:"fixed",float:"left",width:0,height:0},imageScrollContainer:{display:"flex",float:"left",marginRight:15},imageScrollControlsRight:{border:"none",backgroundColor:"rgb(255, 255, 255)",outline:"none",cursor:"pointer",padding:0,margin:0},imageScrollControlsLeft:{float:"left",border:"none",backgroundColor:"rgb(255, 255, 255)",outline:"none",cursor:"pointer",padding:0,margin:0}},Ce=n(378),we=n(379),Ie=Y.a.Text,Te=$.a.TextArea,De=Object(g.b)(null,{editPost:function(e,t){return function(){var n=Object(u.a)(l.a.mark((function n(a){var r;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a({type:v}),n.next=4,m()({url:"".concat("shared-journal-backend.herokuapp.com","/api/posts/edit_post?id=").concat(t),method:"PUT",headers:{"x-auth-token":localStorage.getItem("auth-token")},data:e});case 4:r=n.sent,a({type:f,payload:r.data}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),a({type:S});case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var t=e.editPost,n=e.post,c=e.changeEditState,i="".concat(new Date(n.date).getFullYear(),"-").concat(1===(new Date(n.date).getMonth()+1+"").length?(new Date(n.date).getMonth()+1+"").padStart(2,0):new Date(n.date).getMonth()+1,"-").concat(1===(new Date(n.date).getDate()+1+"").length?(new Date(n.date).getDate()+1+"").padStart(2,0):new Date(n.date).getDate()+1),s=Object(r.useState)(n.text),l=Object(d.a)(s,2),u=l[0],p=l[1],j=Object(r.useState)(n.images),b=Object(d.a)(j,2),g=b[0],h=b[1],m=Object(r.useState)(n.image_keys),x=Object(d.a)(m,2),O=x[0],f=x[1],y=Object(r.useState)([]),v=Object(d.a)(y,2),S=v[0],k=v[1],C=Object(r.useState)([]),w=Object(d.a)(C,2),I=w[0],T=w[1],D=Object(r.useState)(""),R=Object(d.a)(D,2),A=R[0],N=R[1],E=Object(r.useState)([]),_=Object(d.a)(E,2),P=_[0],U=_[1],L=Object(r.useState)(!1),F=Object(d.a)(L,2),M=F[0],J=F[1],W=Object(r.useState)(0),z=Object(d.a)(W,2),B=z[0],Z=z[1],H=o.a.useRef(null),G=function(e){for(var t=[],n=0;n<e.target.files.length;n++)t.push(e.target.files[n]);U(P.concat(t))};return Object(a.jsx)(ee.a,{spinning:M,children:Object(a.jsxs)(te.a,{style:Re.cardForm,actions:[Object(a.jsx)(Ce.a,{onClick:function(){return c()}}),Object(a.jsx)(we.a,{onClick:function(){return function(){if(""===u)return alert("You cannot leave your post without any text");var e=new Q.a;P.forEach((function(t){return e.append("image",t)})),e.append("text",u),e.append("dateTime",A),e.append("imagesToDelete",S),e.append("keysToDelete",I),J(!0),t(e,n._id).then((function(){J(!1),c()}))}()}})],children:[0===g.concat(P).length?Object(a.jsxs)("div",{style:Re.postImageAndTextForm,children:[Object(a.jsxs)("div",{style:Re.uploadDiv,children:[Object(a.jsx)("div",{style:Re.imageFill,children:Object(a.jsx)("img",{src:be,style:Re.placeholderImage,alt:"placeholder"})}),Object(a.jsx)("input",{type:"file",accept:"image/*",ref:H,style:{display:"none"},multiple:!0,onChange:G}),Object(a.jsx)(ne.a,{style:Re.imageUploadButton,icon:Object(a.jsx)(re.a,{}),onClick:function(){return H.current.click()},children:"Click to Upload"})]}),Object(a.jsx)(Te,{style:Re.postTextArea,name:"text",defaultValue:n.text,onChange:function(e){return p(e.target.value)},placeholder:"Add text to your Post"})]}):g&&Object(a.jsxs)("div",{style:Re.postImageAndTextForm,children:[Object(a.jsxs)("div",{style:Re.uploadDiv,children:[Object(a.jsx)("div",{style:Re.imageFill,children:Object(a.jsxs)("div",{style:Re.imageScrollControlsContainer,children:[Object(a.jsxs)("div",{style:Re.imageScrollContainer,children:[g.concat(P).length>1&&Object(a.jsx)("button",{style:Re.imageScrollControls,onClick:function(){Z(0===B?g.concat(P).length-1:B-1)},children:"<"}),g.concat(P).map((function(e,t){return"string"===typeof e?Object(a.jsx)("img",{style:t===B?Re.imageScrollActive:Re.imageScroll,src:e,alt:e},t):Object(a.jsx)("img",{style:t===B?Re.imageScrollActive:Re.imageScroll,src:URL.createObjectURL(e),alt:e},t)})),g.concat(P).length>1&&Object(a.jsx)("button",{style:Re.imageScrollControls,onClick:function(){B===g.concat(P).length-1?Z(0):Z(B+1)},children:">"})]}),Object(a.jsx)(ue.a,{onClick:function(){return function(e){if(e<=g.length-1){k(S.concat([g[e]]));var t=[];g.forEach((function(n,a){a!==e&&t.push(n)})),h(t),T(I.concat([O[e]]));var n=[];O.forEach((function(t,a){a!==e&&n.push(t)})),f(n)}else{var a=[];P.forEach((function(t,n){n!==e-g.length&&a.push(t)})),U(a)}Z(0)}(B)}})]})}),Object(a.jsx)("input",{type:"file",accept:"image/*",ref:H,style:{display:"none"},multiple:!0,onChange:G}),Object(a.jsx)(ne.a,{style:Re.imageUploadButton,icon:Object(a.jsx)(re.a,{}),onClick:function(){return H.current.click()},children:"Click to Upload"})]}),Object(a.jsx)(Te,{style:Re.postTextArea,name:"text",defaultValue:n.text,onChange:function(e){return p(e.target.value)},placeholder:"Add text to your Post"})]}),Object(a.jsxs)("div",{style:Re.dateDiv,children:[Object(a.jsx)(Ie,{style:{color:"rgb(245, 245, 245)",marginRight:10},children:"Date"}),Object(a.jsx)("input",{type:"date",style:Re.dateInput,value:A||i,onChange:function(e){return N(e.target.value)}})]})]})})})),Re={cardForm:{margin:35,paddingRight:25,paddingLeft:25,textAlign:"center"},postImageAndTextForm:{display:"flex",margin:25},uploadDiv:{display:"block"},imageUploadButton:{borderRadius:8,marginTop:5,marginBottom:4},placeholderImage:{maxWidth:200,maxHeight:250,width:"auto",height:"auto"},imageFill:{padding:10,width:280,height:240,display:"flex",justifyContent:"center",alignItems:"center",border:"1.5px solid black",borderRadius:8},dateDiv:{padding:"5px 10px 5px 10px",borderRadius:8,display:"flex",maxWidth:350,justifyContent:"space-between",alignItems:"center",backgroundColor:"rgb(47, 88, 183)"},dateInput:{borderRadius:2,border:"none"},postTextArea:{margin:"0 0 20px 0",height:240,padding:10,resize:"none",fontSize:15,outline:"none",marginLeft:25},image:{borderRadius:4,margin:"3px 15px 15px 15px",maxWidth:200,maxHeight:185,width:"auto",height:"auto"},imageScrollActive:{position:"relative",borderRadius:4,margin:"3px 15px 15px 15px",maxWidth:200,maxHeight:185,width:"auto",height:"auto"},imageScroll:{display:"none"},imageScrollContainer:{display:"flex",alignItems:"center",justifyContent:"space-between"},imageScrollControls:{border:"none",backgroundColor:"rgb(255, 255, 255)",outline:"none",cursor:"pointer",padding:0,margin:0},imageScrollControlsContainer:{margin:"0 auto"}},Ae=function(e){var t=Object(r.useState)(!1),n=Object(d.a)(t,2),o=n[0],c=n[1],i=function(){c(!o)};return o?Object(a.jsx)(De,{post:e.post,changeEditState:i}):Object(a.jsx)(Se,{post:e.post,changeEditState:i})},Ne=n(70),Ee=n(193),_e=n(95),Pe={loading:!1},Ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return Object(W.a)(Object(W.a)({},e),{},{loading:!1});case v:return Object(W.a)(Object(W.a)({},e),{},{loading:!0});case x:return Object(W.a)(Object(W.a)({},e),{},{loading:!1,allIds:t.payload.map((function(e){return e._id})),byIds:t.payload.reduce((function(e,t){return Object(W.a)(Object(W.a)({},e),{},Object(_e.a)({},t._id,t))}),{})});case O:return Object(W.a)(Object(W.a)({},e),{},{loading:!1,allIds:[].concat(Object(Ee.a)(e.allIds),[t.payload._id]),byIds:Object(W.a)(Object(W.a)({},e.byIds),{},Object(_e.a)({},t.payload._id,t.payload))});case y:return Object(W.a)(Object(W.a)({},e),{},{loading:!1,allIds:e.allIds.filter((function(e){return e!==t.payload}))});case f:return Object(W.a)(Object(W.a)({},e),{},{loading:!1,byIds:Object(W.a)(Object(W.a)({},e.byIds),{},Object(_e.a)({},t.payload._id,t.payload))});case k:return{loading:!1,allIds:[],byIds:{}};default:return e}},Le={loading:!1},Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(W.a)(Object(W.a)({},e),{},{loading:!1});case T:return Object(W.a)(Object(W.a)({},e),{},{loading:!0});case D:return Object(W.a)(Object(W.a)({},e),{},{settings:t.payload});default:return e}},Me={token:"",journalName:"",id:"",valid:!1},Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return Object(W.a)(Object(W.a)({},e),{},{journalName:t.payload.displayName});case A:return Object(W.a)(Object(W.a)({},e),{},{token:t.payload.token,id:t.payload.user.id,journalName:t.payload.user.journalName});case N:return Object(W.a)(Object(W.a)({},e),{},{valid:t.payload});case E:return{token:"",journalName:"",id:"",valid:!1};case _:return Object(W.a)(Object(W.a)({},e),{},{journalName:t.payload.journalName,id:t.payload.id});case P:return Object(W.a)(Object(W.a)({},e),{},{journalName:t.payload});default:return e}},We=Object(Ne.combineReducers)({posts:Ue,settings:Fe,userData:Je}),ze=n(185),Be=n(186),Ze=Object(Ne.createStore)(We,Object(ze.composeWithDevTools)(Object(Ne.applyMiddleware)(Be.a))),He=function(){var e=[];return Ze.getState().posts.allIds&&Ze.getState().posts.allIds.forEach((function(t){return e.push(Ze.getState().posts.byIds[t])})),e.sort((function(e,t){return new Date(t.date).getTime()-new Date(e.date).getTime()}))},Ge=function(){var e={};return Ze.getState().posts.allIds&&Ze.getState().posts.allIds.forEach((function(t){e[Ze.getState().posts.byIds[t].year]=[]})),Ze.getState().posts.allIds&&Ze.getState().posts.allIds.forEach((function(t){var n=Ze.getState().posts.byIds[t];e[n.year].includes(n.month)||e[n.year].push(n.month)})),e},Ye=function(e,t){var n=[];return Ze.getState().posts.allIds&&Ze.getState().posts.allIds.forEach((function(e){return n.push(Ze.getState().posts.byIds[e])})),n.filter((function(n){return n.month===e&&n.year===t}))},Ve=function(){return Ze.getState().userData.journalName},Xe=Y.a.Title,Ke=Object(g.b)((function(){return{posts:He(),dateOptions:Ge(),user:Ze.getState().userData.id,journalName:Ve()}}),{getPosts:w})((function(e){var t=e.posts,n=e.dateOptions,o=e.user,c=e.journalName,i=e.getPosts,s=Object(r.useState)(""),l=Object(d.a)(s,2),u=l[0],p=l[1],j=Object(r.useState)(""),b=Object(d.a)(j,2),g=b[0],h=b[1],m=["January","February","March","April","May","June","July","August","September","October","November","December"],x=Object(r.useState)(window.innerWidth<435),O=Object(d.a)(x,1)[0];Object(r.useEffect)((function(){i()}),[i]);return Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:c}),Object(a.jsx)(me,{}),t?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{style:O?qe.userOptionsMobile:qe.userOptionsWeb,children:[Object(a.jsxs)("div",{style:qe.userOptionsDiv,children:["See posts from",Object(a.jsxs)("select",{style:qe.dateOptions,onChange:function(e){return function(e){var t=e.target.value.split(",");"undefined"===t[0]?(p(""),h("")):(p(parseInt(t[0])),h(parseInt(t[1])))}(e)},children:[Object(a.jsx)("option",{defaultValue:void 0+","+void 0,children:"all"}),n&&Object.keys(n).map((function(e,t){return Object(a.jsx)("optgroup",{label:e,value:e,children:n[e]&&n[e].map((function(t,n){return Object(a.jsx)("option",{value:t+","+e,children:m[t]},n)}))},t)}))]})]}),o&&Object(a.jsx)("span",{style:qe.pageRedirect,onClick:function(){var e="http://localhost:3000/visitor/".concat(c.replace(" ","_"));window.open(e,"_blank")},children:Object(a.jsx)("div",{style:qe.userOptionsDiv,children:"View Journal as a visitor"})})]}),Object(a.jsx)("div",{className:"home-post-title",children:g?Object(a.jsx)("h1",{children:"Posts from ".concat(m[u]," ").concat(g)}):t.length>0&&Object(a.jsx)(Xe,{level:2,children:"Your Posts"})}),u||g?Ye(u,g).map((function(e,t){return Object(a.jsx)("div",{style:qe.postContainer,children:Object(a.jsx)(Ae,{post:e})},t)})):t.map((function(e,t){return Object(a.jsx)("div",{style:qe.postContainer,children:Object(a.jsx)(Ae,{post:e})},t)}))]}):Object(a.jsx)("h1",{children:"You have not Posted. Compose one above ^"})]})})),qe={postContainer:{paddingBottom:10},userOptionsWeb:{alignItems:"center",borderRadius:8,padding:15,margin:8,color:"white",backgroundColor:"rgb(47, 88, 183)",display:"flex",justifyContent:"space-between"},userOptionsMobile:{display:"block",borderRadius:8,padding:15,margin:8,color:"white",backgroundColor:"rgb(47, 88, 183)"},dateOptions:{marginLeft:5,color:"white",border:"3px solid white",backgroundColor:"rgb(129, 139, 249)"},userOptionsDiv:{color:"white",padding:8,borderRadius:8,backgroundColor:"rgb(129, 139, 249)",margin:5},pageRedirect:{cursor:"pointer"}},Qe=n(369),$e=n(372),et=n(366),tt=n(374),nt=n(368),at=n(380),rt=n(381);n(57).config();var ot=$.a.TextArea,ct=Object(g.b)(null,{bulkAddRecipients:function(e){return function(){var t=Object(u.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:T}),t.next=4,m()({url:"".concat("shared-journal-backend.herokuapp.com","/api/settings/bulk_add_recipients"),method:"PUT",headers:{"x-auth-token":localStorage.getItem("auth-token")},data:{recipients:e}});case 4:a=t.sent,n({type:D,payload:a.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n({type:I,msg:t.t0.response.data.msg});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},addRecipient:function(e){return function(){var t=Object(u.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:T}),t.next=4,m()({url:"".concat("shared-journal-backend.herokuapp.com","/api/settings/add_recipient"),method:"PUT",headers:{"x-auth-token":localStorage.getItem("auth-token")},data:{recipient:e}});case 4:a=t.sent,n({type:D,payload:a.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n({type:I,msg:t.t0.response.data.msg});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.recipients,n=e.bulkAddRecipients,r=e.addRecipient,c=/\S+@\S+\.\S+/,i=o.a.useState(!1),s=Object(d.a)(i,2),l=s[0],u=s[1],p=o.a.useState(!1),j=Object(d.a)(p,2),b=j[0],g=j[1],h=o.a.useState(""),m=Object(d.a)(h,2),x=m[0],O=m[1],f=o.a.useState(""),y=Object(d.a)(f,2),v=y[0],S=y[1],k=function(){u(!1),g(!1),O(""),S("")};return Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{style:{display:"flex"},children:[Object(a.jsxs)(ne.a,{style:it.addRecipient,onClick:function(){u(!0),g(!0)},children:[Object(a.jsx)(at.a,{}),"Add many Recipients"]}),Object(a.jsxs)(ne.a,{style:it.addRecipient,onClick:function(){u(!0)},children:[Object(a.jsx)(rt.a,{}),"Add one Recipient"]})]}),Object(a.jsx)(nt.a,{title:b?"Bulk Add":"Single Add",style:it.modal,visible:l,onOk:b?function(){var e=!0;""===x&&(e=!1,alert("You must include at least one recipient")),x.split(", ").forEach((function(t){c.test(t)||(e=!1,alert('"'.concat(t,'" is not a valid email')))})),e&&n(x).then((function(){return k()}))}:function(){return""===v?alert("You cannot leave recipient blank"):c.test(v)?void(t.includes(v)?alert("Your recipient list already contains ".concat(v)):r(v).then((function(){return k()}))):alert('"'.concat(v,'" is not a valid email'))},onCancel:k,okText:"Submit",cancelText:"Cancel",children:b?Object(a.jsxs)(et.a,{children:[Object(a.jsx)("p",{children:"Example: 'example@email.com, bestfriend@forever.com, secondcousin@family.com'"}),Object(a.jsx)(ot,{value:x,style:it.bulkAddTextArea,onChange:function(e){return O(e.target.value)},placeholder:"add many recipients..."})]}):Object(a.jsx)(et.a,{children:Object(a.jsx)(et.a.Item,{label:"Recipient",children:Object(a.jsx)($.a,{type:"email",placeholder:"email...",value:v,onChange:function(e){return S(e.target.value)}})})})})]})})),it={modal:{width:"auto"},addRecipient:{margin:"10px 10px 10px 0"},bulkAddTextArea:{resize:"none",height:150,maxHeight:350,overflowY:"auto"}},st=Qe.a.Panel,lt=Y.a.Text,ut=Y.a.Paragraph;n(57).config();var dt=Object(g.b)((function(){return{settings:Ze.getState().settings.settings&&Ze.getState().settings.settings}}),{deleteRecipient:function(e){return function(){var t=Object(u.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:T}),t.next=4,m()({url:"".concat("shared-journal-backend.herokuapp.com","/api/settings/delete_recipient"),method:"PUT",headers:{"x-auth-token":localStorage.getItem("auth-token")},data:{recipient:e}});case 4:a=t.sent,n({type:D,payload:a.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n({type:I});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},editJournalName:function(e){return function(){var t=Object(u.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:T}),t.next=3,m()({url:"".concat("shared-journal-backend.herokuapp.com","/api/settings/edit_journal_name"),method:"PUT",headers:{"x-auth-token":localStorage.getItem("auth-token")},data:{newName:e}});case 3:a=t.sent,n({type:D,payload:a.data}),n({type:P,payload:a.data.journal_name});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},clearRecipients:function(){return function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:T}),e.next=4,m()({url:"".concat("shared-journal-backend.herokuapp.com","/api/settings/clear_recipients"),method:"PUT",headers:{"x-auth-token":localStorage.getItem("auth-token")}});case 4:n=e.sent,t({type:D,payload:n.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t({type:I,msg:e.t0.response.data.msg});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},getSettings:U})((function(e){var t=e.settings,n=e.deleteRecipient,o=e.editJournalName,c=e.clearRecipients,i=e.getSettings,s=Object(r.useState)(),l=Object(d.a)(s,2),u=l[0],p=l[1],j=Object(r.useState)({msg:""}),b=Object(d.a)(j,2),g=b[0],h=b[1],m=Object(r.useState)(!1),x=Object(d.a)(m,2),O=x[0],f=x[1];Object(r.useEffect)((function(){i()}),[i]);return Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"Settings"}),Object(a.jsxs)(Qe.a,{children:[Object(a.jsxs)(st,{header:"Journal Name",children:[g.msg.length>0&&Object(a.jsx)($e.a,{style:pt.errorMsg,description:g.msg,type:"error",action:Object(a.jsx)(ne.a,{type:"text",shape:"circle",onClick:function(){return h(Object(W.a)(Object(W.a)({},g),{},{msg:""}))},children:"X"})}),O?Object(a.jsxs)(et.a,{children:[Object(a.jsx)(et.a.Item,{label:"Journal Name",children:Object(a.jsx)($.a,{value:u,onChange:function(e){return p(e.target.value)}})}),Object(a.jsxs)(et.a.Item,{children:[Object(a.jsx)(ne.a,{style:pt.journalNameButtons,onClick:function(){f(!1),p(t.journal_name)},children:"Cancel"}),Object(a.jsx)(ne.a,{style:pt.journalNameButtons,type:"primary",onClick:function(){return function(){if(""===u)return h("Your journal Name cannot be left empty");o(u).then((function(){f(!1),h(Object(W.a)(Object(W.a)({},g),{},{msg:""}))})).catch((function(e){return h(Object(W.a)(Object(W.a)({},g),{},{msg:e.response.data.msg}))}))}()},children:"Submit"})]})]}):Object(a.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(a.jsx)(lt,{children:t&&t.journal_name}),Object(a.jsx)(ne.a,{type:"text",shape:"circle",onClick:function(){f(!0),p(t.journal_name)},children:Object(a.jsx)(fe.a,{})})]})]}),Object(a.jsxs)(st,{header:"Journal Sharing Method",children:[Object(a.jsx)(ut,{children:"Journals are shared with their recipients on the end of every month."}),Object(a.jsx)(ut,{children:"All posts made during the month are sent to your recipients."})]}),Object(a.jsxs)(st,{header:"Journal Recipients",children:[Object(a.jsx)(lt,{children:"Share your monthly updates with others by entering their email below."}),t&&t.recipients&&Object(a.jsx)(ct,{recipients:t.recipients}),t&&t.recipients.length>0&&Object(a.jsx)("div",{style:pt.recipientContainer,children:t&&t.recipients.map((function(e,t){return Object(a.jsxs)(tt.a,{style:pt.recipientTag,children:[Object(a.jsx)(lt,{style:pt.recipientName,children:e}),Object(a.jsx)(ne.a,{type:"text",shape:"circle",onClick:function(t){return n(e)},children:"x"})]},t)}))}),Object(a.jsx)(Oe.a,{title:"Are you sure you want to delete your entire recipient list?",onConfirm:function(){return c()},okText:"Yes",cancelText:"No",children:t&&t.recipients.length>0&&Object(a.jsx)(ne.a,{danger:!0,children:"Delete All"})})]})]})]})})),pt={startBulkAdd:{padding:8,marginTop:10,marginBottom:10,backgroundColor:"rgb(129, 139, 249)",borderRadius:8,color:"white"},deleteAll:{padding:8,margin:10,borderRadius:8,backgroundColor:"rgb(252, 167, 167)",color:"white"},cancelButton:{padding:8,margin:10,borderRadius:8,backgroundColor:"rgb(129, 139, 249)",color:"white"},deleteAllConfirm:{display:"flex",alignItems:"center"},recipientTag:{borderRadius:8,padding:2,margin:5},recipientName:{padding:4,fontSize:12},recipientContainer:{padding:2,border:"1px black solid",borderRadius:8,maxHeight:300,overflowY:"auto",marginBottom:15},addRecipient:{margin:"10px 10px 10px 0"},journalNameButtons:{marginRight:10},errorMsg:{padding:5,margin:"10px 0 10px 0"}},jt=n(382),bt=n(383),gt=Object(g.b)(null,{likePost:function(e,t){return function(){var n=Object(u.a)(l.a.mark((function n(a){var r;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:v}),n.next=3,m()({url:"".concat("shared-journal-backend.herokuapp.com","/api/posts/like_post"),method:"PUT",data:{id:e,message:t}});case 3:r=n.sent,a({type:f,payload:r.data});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var t=e.post,n=e.likePost,o=Object(r.useState)(!1),c=Object(d.a)(o,2),i=c[0],s=c[1],l=Object(r.useState)(""),u=Object(d.a)(l,2),p=u[0],j=u[1],b=Object(r.useState)(0),g=Object(d.a)(b,2),h=g[0],m=g[1],x=Object(r.useState)(window.innerWidth<435),O=Object(d.a)(x,1)[0],f=function(){s(!i)};return Object(a.jsxs)(te.a,{style:O?{}:ht.postStyle,actions:[Object(a.jsx)(Oe.a,{title:Object(a.jsx)($.a,{value:p,placeholder:"share a message",onChange:function(e){return j(e.target.value)}}),onConfirm:function(){return n(t._id,p)},okText:"Send Like",cancelText:"Cancel",icon:Object(a.jsx)(jt.a,{twoToneColor:"rgb(205, 220, 250)",style:{fontSize:20}}),children:Object(a.jsx)(ae.a,{title:"Add a like and message to this post",placement:"bottom",children:Object(a.jsx)(bt.a,{})})})],children:[t.images.length>1?Object(a.jsx)("div",{className:"post-info",children:Object(a.jsxs)("div",{style:ht.imageScrollContainer,children:[Object(a.jsx)("button",{style:ht.imageScrollControlsLeft,onClick:function(){m(0===h?t.images.legnth-1:h-1)},children:"<"}),t.images.map((function(e,t){return Object(a.jsx)("img",{style:i?t===h?ht.imageScrollZoomActive:ht.imageScrollZoom:t===h?ht.imageScrollNonZoomActive:ht.imageScrollNonZoom,src:e,alt:t,onClick:f},t)})),Object(a.jsx)("button",{style:ht.imageScrollControlsRight,onClick:function(){h===t.images.length-1?m(0):m(h+1)},children:">"})]})}):0!==t.images.length&&Object(a.jsx)("img",{style:i?ht.imageZoom:ht.imageNonZoom,src:t.images[0],alt:"preview",onClick:f}),Object(a.jsx)("p",{style:ht.postText,children:t.text}),Object(a.jsx)("p",{style:ht.postDate,children:function(){var e=new Date(t.date);e.getTimezoneOffset()>0&&e.setTime(e.getTime()+60*e.getTimezoneOffset()*1e3);return"".concat(e.getDate()," ~ ").concat(["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()]," ~ ").concat(e.getFullYear())}()}),t.likes.length>0&&t.likes.map((function(e,t){return Object(a.jsx)(ae.a,{title:e,children:Object(a.jsx)(jt.a,{twoToneColor:"rgb(205, 220, 250)",style:ht.like})},t)}))]})})),ht={like:{margin:5},postStyle:{marginRight:50,marginLeft:50},postText:{whiteSpace:"pre-wrap",paddingRight:15},postDate:{fontSize:12},imageNonZoom:{float:"left",borderRadius:4,margin:"3px 15px 15px 15px",maxWidth:300,maxHeight:300,width:"auto",height:"auto",cursor:"zoom-in"},imageZoom:{float:"left",borderRadius:4,margin:"3px 15px 15px 15px",maxWidth:600,maxHeight:600,width:"auto",height:"auto",cursor:"zoom-out"},imageScrollZoomActive:{position:"relative",float:"left",borderRadius:4,margin:"3px 15px 15px 15px",maxWidth:600,maxHeight:600,width:"auto",height:"auto",cursor:"zoom-out"},imageScrollNonZoomActive:{position:"relative",float:"left",borderRadius:4,margin:"3px 15px 15px 15px",maxWidth:300,maxHeight:300,width:"auto",height:"auto",cursor:"zoom-in"},imageScrollZoom:{opacity:0,position:"fixed",float:"left",width:0,height:0},imageScrollNonZoom:{opacity:0,position:"fixed",float:"left",width:0,height:0},imageScrollContainer:{display:"flex",float:"left",marginRight:15},imageScrollControlsRight:{border:"none",backgroundColor:"rgb(255, 255, 255)",outline:"none",cursor:"pointer",padding:0,margin:0},imageScrollControlsLeft:{float:"left",border:"none",backgroundColor:"rgb(255, 255, 255)",outline:"none",cursor:"pointer",padding:0,margin:0}},mt=(n(356),Object(g.b)((function(){return{posts:He(),dateOptions:Ge()}}),{publicGetPosts:function(e){return function(){var t=Object(u.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:v}),t.next=4,m()({url:"".concat("shared-journal-backend.herokuapp.com","/api/posts/public_get?journal_name=").concat(e),method:"GET"});case 4:a=t.sent,n({type:x,payload:a.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n({type:S});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.posts,n=e.dateOptions,o=e.publicGetPosts,c=e.match,i=Object(r.useContext)(J),s=Object(d.a)(i,2)[1],l=Object(r.useState)(),u=Object(d.a)(l,2),p=u[0],j=u[1],b=Object(r.useState)(),g=Object(d.a)(b,2),h=g[0],m=g[1],x=["January","February","March","April","May","June","July","August","September","October","November","December"],O=window.innerWidth<435;Object(r.useEffect)((function(){s(!0),o(c.params.journalName)}),[s,o,c.params.journalName]);var f=function(e){return n[e]&&n[e].map((function(t,n){return Object(a.jsx)("option",{value:t+","+e,children:x[t]},n)}))};return Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{style:O?xt.userOptionsMobile:xt.userOptionsWeb,children:[Object(a.jsx)("div",{children:Object(a.jsx)("h1",{style:{color:"white",padding:0,margin:0},children:c.params&&c.params.journalName.split("_").join(" ")})}),Object(a.jsxs)("div",{style:xt.userOptionsDiv,children:["See posts from",Object(a.jsxs)("select",{style:xt.dateOptions,onChange:function(e){return function(e){var t=e.target.value.split(",");"undefined"===t[0]?(j(""),m("")):(j(parseInt(t[0])),m(parseInt(t[1])))}(e)},children:[Object(a.jsx)("option",{defaultValue:void 0+","+void 0,children:"all"}),n&&Object.keys(n).map((function(e,t){return Object(a.jsx)("optgroup",{label:e,value:e,children:f(e)},t)}))]})]})]}),Object(a.jsx)("span",{className:"public-view-post-header",children:h?Object(a.jsx)("h1",{children:"Posts from ".concat(x[p]," ").concat(h)}):Object(a.jsx)("h1",{children:"All Posts"})}),p||h?Ye(p,h).map((function(e,t){return Object(a.jsx)("div",{style:xt.postContainer,children:Object(a.jsx)(gt,{post:e})},t)})):t&&t.map((function(e,t){return Object(a.jsx)("div",{style:xt.postContainer,children:Object(a.jsx)(gt,{post:e})},t)}))]})}))),xt={postContainer:{paddingBottom:10},userOptionsWeb:{alignItems:"center",borderRadius:8,padding:15,margin:8,color:"white",backgroundColor:"rgb(47, 88, 183)",display:"flex",justifyContent:"space-between"},userOptionsMobile:{display:"block",borderRadius:8,padding:15,margin:8,color:"white",backgroundColor:"rgb(47, 88, 183)"},dateOptions:{marginLeft:5,color:"white",border:"3px solid white",backgroundColor:"rgb(129, 139, 249)"},userOptionsDiv:{color:"white",padding:8,borderRadius:8,backgroundColor:"rgb(129, 139, 249)",margin:5}},Ot=n(97),ft=n(62);n(57).config();var yt=Y.a.Text,vt=Y.a.Title,St=Object(g.b)(null,{loginUser:L})((function(e){var t=e.setSignIn,n=e.loginUser,o=Object(r.useState)(),c=Object(d.a)(o,2),i=c[0],s=c[1],p=Object(r.useState)(),b=Object(d.a)(p,2),g=b[0],h=b[1],m=Object(r.useState)({msg:""}),x=Object(d.a)(m,2),O=x[0],f=x[1],y=Object(r.useContext)(M).setUserData,v=Object(j.g)(),S=function(){var e=Object(u.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={email:i,password:g},e.prev=1,e.next=4,n(t);case 4:a=e.sent,y({token:a.token,user:a.user,visitor:!1}),localStorage.setItem("auth-token",a.token),v.push("/"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),e.t0.response.data&&e.t0.response.data.msg&&f(Object(W.a)(Object(W.a)({},O),{},{msg:e.t0.response.data.msg}));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)(te.a,{style:wt.logInForm,children:[Object(a.jsx)(vt,{style:{textAlign:"center"},children:"Log In"}),O.msg.length>0&&Object(a.jsx)($e.a,{style:wt.errorMsg,description:O.msg,type:"error",action:Object(a.jsx)(ne.a,{type:"text",shape:"circle",onClick:function(){return f(Object(W.a)(Object(W.a)({},O),{},{msg:""}))},children:"X"})}),Object(a.jsxs)(et.a,Object(W.a)(Object(W.a)({},kt),{},{children:[Object(a.jsx)(et.a.Item,{label:Object(a.jsx)(yt,{children:"Email"}),children:Object(a.jsx)($.a,{type:"email",onChange:function(e){return s(e.target.value)}})}),Object(a.jsx)(et.a.Item,{label:Object(a.jsx)(yt,{children:"Password"}),children:Object(a.jsx)($.a.Password,{onChange:function(e){return h(e.target.value)}})}),Object(a.jsx)(et.a.Item,Object(W.a)(Object(W.a)({},Ct),{},{children:Object(a.jsx)(ne.a,{type:"primary",onClick:S,children:"Log In"})})),Object(a.jsx)(et.a.Item,Object(W.a)(Object(W.a)({},Ct),{},{children:Object(a.jsx)(ne.a,{type:"primary",onClick:function(){return t(!1)},children:"I don't have an account - Register"})}))]}))]})})),kt={labelCol:{span:6},wrapperCol:{span:16}},Ct={wrapperCol:{offset:6,span:16}},wt={logInForm:{width:600,borderRadius:8,margin:25},errorMsg:{padding:5,margin:"10px 0 10px 0"}};n(57).config();var It=Y.a.Text,Tt=Y.a.Title,Dt=Object(g.b)(null,{newSettings:function(e){return function(){var t=Object(u.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:T}),t.next=4,m()({url:"".concat("shared-journal-backend.herokuapp.com","/api/settings/new"),method:"POST",data:e});case 4:a=t.sent,n({type:D,payload:a.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n({type:I,msg:t.t0.response.data.msg});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},loginUser:L,registerUser:function(e){return function(){var t=Object(u.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m()({url:"".concat("shared-journal-backend.herokuapp.com","/api/users/register"),method:"POST",data:e});case 2:a=t.sent,n({type:R,payload:a.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.setSignIn,n=e.newSettings,o=e.registerUser,c=e.loginUser,i=Object(r.useState)(),s=Object(d.a)(i,2),l=s[0],u=s[1],p=Object(r.useState)(),b=Object(d.a)(p,2),g=b[0],h=b[1],m=Object(r.useState)(),x=Object(d.a)(m,2),O=x[0],f=x[1],y=Object(r.useState)(),v=Object(d.a)(y,2),S=v[0],k=v[1],C=Object(r.useState)({msg:""}),w=Object(d.a)(C,2),I=w[0],T=w[1],D=Object(r.useContext)(M).setUserData,R=Object(j.g)();return Object(a.jsxs)(te.a,{style:Nt.RegisterForm,children:[Object(a.jsx)(Tt,{style:{textAlign:"center"},children:"Register"}),I.msg.length>0&&Object(a.jsx)($e.a,{style:Nt.errorMsg,description:I.msg,type:"error",action:Object(a.jsx)(ne.a,{type:"text",shape:"circle",onClick:function(){return T(Object(W.a)(Object(W.a)({},I),{},{msg:""}))},children:"X"})}),Object(a.jsxs)(et.a,Object(W.a)(Object(W.a)({},Rt),{},{children:[Object(a.jsx)(et.a.Item,{label:Object(a.jsx)(It,{children:"Email"}),children:Object(a.jsx)($.a,{type:"email",onChange:function(e){return u(e.target.value)}})}),Object(a.jsx)(et.a.Item,{label:Object(a.jsx)(It,{children:"Password"}),children:Object(a.jsx)($.a.Password,{onChange:function(e){return h(e.target.value)}})}),Object(a.jsx)(et.a.Item,{label:Object(a.jsx)(It,{children:"Verify Password"}),children:Object(a.jsx)($.a.Password,{placeholder:"Verify password",onChange:function(e){return f(e.target.value)}})}),Object(a.jsx)(et.a.Item,{label:Object(a.jsx)(It,{children:"Journal Name"}),children:Object(a.jsx)($.a,{type:"text",suffix:"Journal",onChange:function(e){return k(e.target.value)}})}),Object(a.jsx)(et.a.Item,Object(W.a)(Object(W.a)({},At),{},{children:Object(a.jsx)(ne.a,{type:"primary",onClick:function(){var e=S+" Journal";o({email:l,password:g,passwordCheck:O,displayName:e}).then((function(){c({email:l,password:g}).then((function(t){var a=t.token,r=t.user;n({displayName:e,recipients:[],user:r.id}),D({token:a,user:r,visitor:!1}),localStorage.setItem("auth-token",a),R.push("/")}))})).catch((function(e){return T(Object(W.a)(Object(W.a)({},I),{},{msg:e.response.data.msg}))}))},children:"Register"})})),Object(a.jsx)(et.a.Item,Object(W.a)(Object(W.a)({},At),{},{children:Object(a.jsx)(ne.a,{type:"primary",onClick:function(){return t(!0)},children:"I have an account - Sign In"})}))]}))]})})),Rt={labelCol:{span:6},wrapperCol:{span:16}},At={wrapperCol:{offset:6,span:16}},Nt={RegisterForm:{width:600,borderRadius:8,margin:25},errorMsg:{padding:5,margin:"10px 0 10px 0"}},Et=Y.a.Text,_t=Y.a.Title,Pt={row:{display:"flex",justifyContent:"space-evenly"}},Ut=function(){var e=o.a.useState(!0),t=Object(d.a)(e,2),n=t[0],c=t[1],i=Object(j.g)();return Object(r.useEffect)((function(){var e=!1;return function(){var t=Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=5;break}return t.next=3,F();case 3:if(!t.sent){t.next=5;break}i.push("/");case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()(),function(){return e=!0}})),Object(a.jsxs)(Ot.a,{gutter:[10,10],style:Pt.row,children:[Object(a.jsxs)(ft.a,{span:13,children:[Object(a.jsx)(_t,{children:"Welcome to Shared-Journal"}),Object(a.jsx)(Et,{children:"Here you can create a journal and we will take care of sharing your moments with your closest friends and family."})]}),Object(a.jsx)(ft.a,{children:n?Object(a.jsx)(St,{setSignIn:c}):Object(a.jsx)(Dt,{setSignIn:c})})]})};n(57).config();var Lt=b.a.Content,Ft=b.a.Footer,Mt=Object(g.b)((function(){return{journalName:Ve()}}),{getPosts:w,getSettings:U,getUser:function(e){return function(){var t=Object(u.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m()({url:"".concat("shared-journal-backend.herokuapp.com","/api/users/"),method:"GET",headers:{"x-auth-token":e}});case 2:return a=t.sent,n({type:_,payload:a.data}),t.abrupt("return",a.data);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.getPosts,n=e.getSettings,o=e.getUser,c=e.journalName,i=Object(r.useState)({token:void 0,user:void 0}),s=Object(d.a)(i,2),g=s[0],h=s[1],m=Object(r.useState)(!1),x=Object(d.a)(m,2),O=x[0],f=x[1],y=localStorage.getItem("auth-token"),v=Object(r.useState)(window.innerWidth<435),S=Object(d.a)(v,1)[0];return Object(r.useEffect)((function(){(function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:if(!e.sent){e.next=4;break}""!==y&&(t(),n(),o(y).then((function(e){h({token:y,user:e})})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[y,t,n,o,c]),Object(a.jsx)(b.a,{style:Jt.applicationContainer,children:Object(a.jsx)(p.a,{children:Object(a.jsx)(M.Provider,{value:{userData:g,setUserData:h},children:Object(a.jsxs)(J.Provider,{value:[O,f],children:[Object(a.jsx)(X,{}),Object(a.jsx)(Lt,{style:S?{margin:0}:{margin:"0 150px"},children:Object(a.jsx)("div",{style:S?Jt.applicationLayoutContentMobile:Jt.applicationLayoutContentWeb,children:Object(a.jsxs)(j.d,{children:[Object(a.jsx)(B,{path:"/user_settings",component:dt}),Object(a.jsx)(j.b,{path:"/home",component:Ut}),Object(a.jsx)(j.b,{path:"/visitor/:journalName",component:mt}),Object(a.jsx)(B,{path:"/",component:Ke})]})})}),Object(a.jsxs)(Ft,{style:Jt.applicationFooter,children:["Shared Journal ",Object(a.jsx)("img",{src:G,alt:"logo",style:Jt.applicationLogo})," Created by Noah Cape"]})]})})})})})),Jt={applicationContainer:{padding:0,margin:0,boxSizing:"border-box"},applicationLayoutContentWeb:{minHeight:280,padding:24,background:"rgb(255, 255, 255)"},applicationLayoutContentMobile:{minHeight:500,background:"rgb(255, 255, 255)"},applicationFooter:{textAlign:"center"},applicationLogo:{width:20,height:20}};n(361);i.a.render(Object(a.jsx)(g.a,{store:Ze,children:Object(a.jsx)(Mt,{})}),document.getElementById("root"))}},[[362,1,2]]]);
//# sourceMappingURL=main.83dff738.chunk.js.map